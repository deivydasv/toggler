/*!
 * Toggler (https://github.com/deivydasv/toggler)
 * Version: 1.1.3
 * Last update on: 2017-12-18 14:47:11
 * Author: Deivydas Vaseris
 */

"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Toggler=function(){function e(){if(_classCallCheck(this,e),arguments.length){var t=arguments.length<=0?void 0:arguments[0];if("string"==typeof t&&(t=document.body.querySelector(t)),t instanceof HTMLElement){if(t.Toggler)return t.Toggler;t.Toggler=this,this.element=t,this.element.classList.add(e.Config.CLASS_BASE)}}}return _createClass(e,null,[{key:"getPlugin",value:function(t){return t.Toggler||new e(t)}},{key:"TransitionEnd",get:function(){return"transition"in document.documentElement.style?"transitionend":"WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":null}}]),_createClass(e,[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.element,a=[];if(!this.isVisible()&&!this.isTransitioning()){if(t){var r="string"==typeof t?document.body.querySelector(t):t;if(r&&(a=r.querySelectorAll("."+e.Config.CLASS_BASE))){a=Array.prototype.slice.call(a).filter(function(e){return!e.isSameNode(o)});for(var l=0;l<a.length;l+=1){var d=e.getPlugin(a[l]);if(d.isTransitioning())return;d.isVisible()&&d.hide(null,n||s)}}}if(n)return o.classList.add(e.Config.CLASS_VISIBLE),this._triggerCheck(),void this._dispatchEvent("show");(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(o.style.opacity=0),this.isFadeAnimation()||(o.style.height=0),o.classList.add(e.Config.CLASS_TRANSITIONING),this._repaint(),this._addTransitionEndListener(function t(){o.classList.add(e.Config.CLASS_VISIBLE),(i.isFadeAnimation()||i.isSlideFadeAnimation())&&(o.style.opacity=null),i.isFadeAnimation()||(o.style.height=null),i._removeTransitionEndListener(t),o.classList.remove(e.Config.CLASS_TRANSITIONING),i._triggerCheck(),i._dispatchEvent("show")}),(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(o.style.opacity=1),this.isFadeAnimation()||(o.style.height=o.scrollHeight+"px")}}},{key:"hide",value:function(){var t=this,i=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]),n=this.element;if(!this.isHidden()&&!this.isTransitioning()){if(i)return this.element.classList.remove(e.Config.CLASS_VISIBLE),this._triggerCheck(),void this._dispatchEvent("hide");n.classList.add(e.Config.CLASS_TRANSITIONING),n.classList.remove(e.Config.CLASS_VISIBLE),(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(n.style.opacity=1),this.isFadeAnimation()||(n.style.height=n.offsetHeight+"px"),this._repaint(),this._addTransitionEndListener(function i(){(t.isFadeAnimation()||t.isSlideFadeAnimation())&&(n.style.opacity=null),t.isFadeAnimation()||(n.style.height=null),t._removeTransitionEndListener(i),n.classList.remove(e.Config.CLASS_TRANSITIONING),t._triggerCheck(),t._dispatchEvent("hide")}),(this.isFadeAnimation()||this.isSlideFadeAnimation())&&(n.style.opacity=0),this.isFadeAnimation()||(n.style.height=0)}}},{key:"tab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.show(e,t,!0)}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isHidden()?this.show(e,t):this.hide(null,t)}},{key:"isTransitioning",value:function(){return this.element.classList.contains(e.Config.CLASS_TRANSITIONING)}},{key:"isVisible",value:function(){return this.element.classList.contains(e.Config.CLASS_VISIBLE)}},{key:"isHidden",value:function(){return!this.isVisible()}},{key:"isFadeAnimation",value:function(){return this.element.classList.contains(e.Config.CLASS_FADE)}},{key:"isSlideFadeAnimation",value:function(){return this.element.classList.contains(e.Config.CLASS_SLIDEFADE)}},{key:"isSlideAnimation",value:function(){return!this.element.classList.contains(e.Config.CLASS_FADE)&&!this.element.classList.contains(e.Config.CLASS_SLIDEFADE)}},{key:"_triggerCheck",value:function(){var t=this,i=document.body.querySelectorAll("[data-toggler]");Array.prototype.slice.call(i).forEach(function(i){var n=void 0;if(void 0!==i.dataset.togglerTarget?n=i.dataset.togglerTarget:i.hasAttribute("href")&&(n=i.getAttribute("href")),n){var s=document.body.querySelectorAll(n);Array.prototype.slice.call(s).forEach(function(n){n.isSameNode(t.element)&&(e.getPlugin(n).isVisible()?i.classList.add(e.Config.CLASS_TARGET_VISIBLE):i.classList.remove(e.Config.CLASS_TARGET_VISIBLE))})}})}},{key:"_repaint",value:function(){return getComputedStyle(this.element).height}},{key:"_dispatchEvent",value:function(e){var t=void 0;try{t=new Event("toggler."+e)}catch(i){(t=document.createEvent("Event")).initEvent("toggler"+e,!1,!1)}this.element.dispatchEvent(t)}},{key:"_addTransitionEndListener",value:function(t){e.TransitionEnd?this.element.addEventListener(e.TransitionEnd,t):t()}},{key:"_removeTransitionEndListener",value:function(t){e.TransitionEnd&&this.element.removeEventListener(e.TransitionEnd,t)}}],[{key:"AddEventClick",value:function(){function t(t){var i=void 0;if(void 0!==t.dataset.togglerTarget?i=t.dataset.togglerTarget:t.hasAttribute("href")&&(i=t.getAttribute("href")),i){var n=document.body.querySelectorAll(i),s=(t.dataset.toggler.match(/(show|hide|tab)/gi)||["toggle"])[0].toLowerCase(),o=""===t.dataset.togglerForce||/^(1|true|yes)$/gi.test(t.dataset.togglerForce),a=document.body.querySelector(t.dataset.togglerCollection);Array.prototype.slice.call(n).forEach(function(t){e.getPlugin(t)[s](a,o)})}}if(e.Config.DELEGATE_CLICK)document.body.addEventListener("click",function(e){for(var i=void 0,n=e.target;n!==document.body;n=n.parentElement)if(void 0!==n.dataset.toggler){i=n;break}i&&(e.preventDefault(),t(i))});else{var i=document.body.querySelectorAll("[data-toggler]");if(!i.length)return;Array.prototype.slice.call(i).forEach(function(e){e.addEventListener("click",function(i){i.preventDefault(),t(e)})})}}},{key:"Init",value:function(t){e.Config={CLASS_BASE:"js-toggler",CLASS_VISIBLE:"is-visible",CLASS_TARGET_VISIBLE:"is-target-visible",CLASS_TRANSITIONING:"is-transitioning",CLASS_FADE:"is-fade",CLASS_SLIDEFADE:"is-slidefade",DELEGATE_CLICK:!1},Object.keys(t||{}).forEach(function(i){e.Config[i]=t[i]});var i=function(){e.AddEventClick();var t=document.body.querySelectorAll("[data-toggler]");Array.prototype.slice.call(t).forEach(function(t){var i=void 0;if(void 0!==t.dataset.togglerTarget?i=t.dataset.togglerTarget:t.hasAttribute("href")&&(i=t.getAttribute("href")),i){var n=document.body.querySelectorAll(i);Array.prototype.slice.call(n).forEach(function(i){e.getPlugin(i).isVisible()?t.classList.add(e.Config.CLASS_TARGET_VISIBLE):t.classList.remove(e.Config.CLASS_TARGET_VISIBLE)})}})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i(),e.Init=null}}]),e}();